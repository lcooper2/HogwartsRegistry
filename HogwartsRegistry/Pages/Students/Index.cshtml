@page
@model HogwartsRegistry.Pages.Students.IndexModel
@{
    ViewData["Title"] = "Index";
}

    <form method="get">
        <br />
        <div class="row">
            <div class="col-6">
                <h2 class="text-info">Students</h2>
            </div>
            <div class="col-6 text-right">
                <a asp-page="StudentCreate" class="btn btn-info">Add Student</a>
            </div>
        </div>
        <br />
        <br />
        <div class="border">
            <div style="height: 60px;" class="container border border-secondary">
                <div class="row">
                    <div class="col-11">
                        <div class="row" style="padding-top:10px">
                            <div class="col-4">
                                @Html.Editor("searchLastName", new
                                {
                                    htmlAttributes = new
                                    {
                                @class = "form-control",
                                placeholder = "Last Name..."
                                }
                                }
                                )
                            </div>
                            <div class="col-4">
                                @Html.Editor("searchYear", new
                                {
                                    htmlAttributes = new
                                    {
                                @class = "form-control",
                                placeholder = "Year..."
                                }
                                }
                                )
                            </div>
                            <div class="col-4">
                                @Html.Editor("searchHouse", new
                                {
                                    htmlAttributes = new
                                    {
                                @class = "form-control",
                                placeholder = "House..."
                                }
                                }
                                )
                            </div>
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="row" style="padding-top:10px; padding-right:15px;">
                            <button type="submit" name="submit" class="btn btn-info form-control" value="Search"><i class="fas fa-search"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @if (Model.StudentListViewModel.StudentList.Count() > 0)
        {
            <table class="table table-striped">
                <tr class="table-secondary">
                    <th>@Html.DisplayNameFor(m => m.StudentListViewModel.StudentList[0].FirstName)</th>
                    <th>@Html.DisplayNameFor(m => m.StudentListViewModel.StudentList[0].LastName)</th>
                    <th>@Html.DisplayNameFor(m => m.StudentListViewModel.StudentList[0].Gender)</th>
                    <th>@Html.DisplayNameFor(m => m.StudentListViewModel.StudentList[0].Year)</th>
                    <th>@Html.DisplayNameFor(m => m.StudentListViewModel.StudentList[0].House)</th>
                    <th></th>
                </tr>
                @foreach (var student in Model.StudentListViewModel.StudentList)
                {
                    <tr>
                        <td>@Html.DisplayFor(m => student.FirstName)</td>
                        <td>@Html.DisplayFor(m => student.LastName)</td>
                        <td>@Html.DisplayFor(m => student.Gender)</td>
                        <td>@Html.DisplayFor(m => student.Year)</td>
                        <td>@Html.DisplayFor(m => student.House)</td>
                        <td>
                            <button asp-page-handler="Delete" asp-route-id="@student.Id" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this student?')">Delete</button>
                            <a asp-route-id="@student.Id" asp-page="StudentEdit" class="btn btn-success btn-sm">Edit</a>
                        </td>
                    </tr>
                }
                <tr>
                    <td colspan="5" class="text-right">
                        <div page-model="@Model.StudentListViewModel.PagingInfo" asp-action="Index" page-class="btn border"
                             page-class-normal="btn btn-light" page-class-selected="btn btn-info active" class="btn-group"></div>
                    </td>
                </tr>
            </table>
        }
        else
        {
            <p>No students in the registry.</p>
        }
    </form>
